{% extends "base.html" %}

{% block title %}OctoDNS GUI - Dashboard{% endblock %}

{% block content %}
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 24px;">
    <div class="card" style="text-align: center;">
        <div style="font-size: 32px; font-weight: bold; color: var(--accent-color);">{{ stats.env_vars }}</div>
        <div style="color: var(--secondary-text-color);">Secrets</div>
    </div>
    <div class="card" style="text-align: center;">
        <div style="font-size: 32px; font-weight: bold; color: var(--accent-color);">{{ stats.providers }}</div>
        <div style="color: var(--secondary-text-color);">Provider</div>
    </div>
    <div class="card" style="text-align: center;">
        <div style="font-size: 32px; font-weight: bold; color: var(--accent-color);">{{ stats.zones }}</div>
        <div style="color: var(--secondary-text-color);">Zonen</div>
    </div>
</div>

<div class="card">
    <h2>Schnellstart</h2>
    <ol style="line-height: 2;">
        <li><a href="{{ url_for('environment.index') }}">Secrets anlegen</a> (API-Tokens, Passwörter)</li>
        <li>Provider konfigurieren (Source + Targets)</li>
        <li>Zonen anlegen und Targets zuweisen</li>
        <li>Sync ausführen</li>
    </ol>
</div>

{% if stats.recent_jobs %}
<div class="card">
    <h2>Letzte Sync-Jobs</h2>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Status</th>
                <th>Typ</th>
                <th>Erstellt</th>
            </tr>
        </thead>
        <tbody>
            {% for job in stats.recent_jobs %}
            <tr>
                <td>#{{ job.id }}</td>
                <td>{{ job.status }}</td>
                <td>{{ job.trigger_type or '-' }}</td>
                <td>{{ job.created_at.strftime('%d.%m.%Y %H:%M') }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endif %}
{% endblock %}
